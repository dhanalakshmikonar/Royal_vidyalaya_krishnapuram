<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Royal Vidyalaya</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <div class="logo">Royal Vidyalaya</div>
    <nav>
      <ul class="nav-links">
        <li><a href="#home" class="nav-link">Home</a></li>
        <li><a href="#about" class="nav-link">About Us</a></li>
        <li><a href="#gallery" class="nav-link">Gallery</a></li>
        <li><a href="#Academics" class="nav-link">Academics</a></li>
        <li><a href="#Notice" class="nav-link">Notice</a></li>
        <li><a href="#contact" class="nav-link">Contact Us</a></li>
      </ul>
    </nav>
  </header>

  <section id="home" class="full-screen">
    <div class="home-content">
      <h1>Welcome to Royal Vidyalaya</h1>
      <p>Where learning meets excellence</p>
      <a href="#about" class="btn">Learn More</a>
    </div>
  </section>

  <section id="about" class="about-section">
  <div class="about-box">
    <h2>About Us</h2>
    <p>Royal Vidyalaya is a premier CBSE-affiliated institution dedicated to nurturing future leaders. We provide a strong academic foundation while fostering values, creativity, and independent thinking.</p>
    <p>Our aim is to promote all-round development‚Äîintellectual, physical, emotional, and social‚Äîby offering co-curricular and extracurricular programs that enrich each student‚Äôs school experience.</p>
    <p>We take pride in preserving our rich cultural heritage by instilling moral values and respect for traditions, preparing students to thrive in a global society with strong roots and a forward-looking mindset.</p>
  </div>
</section>

  <section class="gallery-section" id="gallery">
    <h2>Our School Gallery</h2>
    <p>Moments of learning, joy, and creativity at Royal Vidyalaya</p>
    
    <div class="gallery-grid">
      <div class="gallery-item"><img src="images/school1.jpg" alt="Event 1" /></div>
      <div class="gallery-item"><img src="images/school2.jpg" alt="Event 2" /></div>
      <div class="gallery-item"><img src="images/school3.jpg" alt="Event 3" /></div>
      <div class="gallery-item"><img src="images/school4.jpg" alt="Event 4" /></div>
      <div class="gallery-item"><img src="images/schhol5.jpg" alt="Event 5" /></div>
      <div class="gallery-item"><img src="images/school6.jpg" alt="Event 6" /></div>
    </div>
  </section>

  <section class="academics-section" id="Academics">
    <h2>Academics</h2>
    <p class="intro">Our academic programs are designed to provide all-round development and prepare students for a bright future.</p>

    <div class="academic-card" onclick="toggleContent(this)">
      <h3>Primary School (Class I - V)</h3>
      <div class="academic-content">
        <p>Focus on foundational learning through interactive methods and continuous evaluation. Subjects include English, Math, EVS, Hindi, and Art.</p>
      </div>
    </div>

    <div class="academic-card" onclick="toggleContent(this)">
      <h3>Middle School (Class VI - VIII)</h3>
      <div class="academic-content">
        <p>Development of analytical skills and introduction to subject specialization. Subjects include Science, Social Science, Computer, and Languages.</p>
      </div>
    </div>

    <div class="academic-card" onclick="toggleContent(this)">
      <h3>Secondary School (Class IX - X)</h3>
      <div class="academic-content">
        <p>CBSE-based curriculum with focus on board exam preparation, project work, and career guidance.</p>
      </div>
    </div>

    <div class="academic-card" onclick="toggleContent(this)">
      <h3>Senior Secondary (Class XI - XII)</h3>
      <div class="academic-content">
        <p>Streams offered: Science (PCM/PCB), Commerce, and Humanities. Emphasis on career readiness and practical learning.</p>
      </div>
    </div>
  </section>

  <script src="script.js"></script>

  <section id="Notice" class="card">
      <center><h2>Notice Board</h2></center>
      <ul>
        <li>üìå School reopens on 17th June.</li>
        <li>üìå Parent-teacher meeting on 22nd June.</li>
        <li>üìå Science Exhibition on 28th June.</li>
      </ul>
    </section>

    <section id="events" class="card">
      <h2>Upcoming Events</h2>
      <table>
        <thead>
          <tr><th>Date</th><th>Event</th></tr>
        </thead>
        <tbody>
          <tr><td>17 Jun</td><td>School Reopening</td></tr>
          <tr><td>22 Jun</td><td>PTM (Grades 1‚Äì10)</td></tr>
          <tr><td>28 Jun</td><td>Science Exhibition</td></tr>
        </tbody>
      </table>
    </section>

    <section id="admissions" class="card">
      <h2>Admission Types</h2>
      <ul>
        <li>üßí Kindergarten</li>
        <li>üìò Primary School (Grades 1‚Äì5)</li>
        <li>üìó Middle School (Grades 6‚Äì8)</li>
        <li>üìô High School (Grades 9‚Äì12)</li>
      </ul>
    </section>
  </main>

  <script src="trial.js"></script>

    <section class="contact-section" id="contact">
    <div class="contact-container">
      <h2>Contact Us</h2>
      <p>We'd love to hear from you. Please fill out the form below.</p>
      <form id="contactForm">
        <div class="form-group">
          <label for="name">Full Name</label>
          <input type="text" id="name" name="name" placeholder="Your Name" required />
          <span class="error-message" id="nameError"></span>
        </div>
        <div class="form-group">
          <label for="email">Email Address</label>
          <input type="email" id="email" name="email" placeholder="Your Email" required />
          <span class="error-message" id="emailError"></span>
        </div>
        <div class="form-group">
          <label for="phone">Phone Number</label>
          <input type="tel" id="phone" name="phone" placeholder="Your Phone Number" required />
          <span class="error-message" id="phoneError"></span>
        </div>
        <div class="form-group">
          <label for="message">Your Message</label>
          <textarea id="message" name="message" placeholder="Type your message here..." rows="5" required></textarea>
          <span class="error-message" id="messageError"></span>
        </div>
        <button type="submit" class="submit-button">Send Message</button>
      </form>
      <div class="form-response" id="formResponse"></div>
    </div>
  </section>

  <center>
  <section>
    <h2>Know more</h2>
    <p>We‚Äôd love to hear from you. Reach out for any queries.</p>
    <p><strong>Address:</strong> 5th street, Krishnapuram, India, Tamil Nadu</p>
    <p><strong>Phone:</strong> 096008 05046</p>
    <p><strong>Email:</strong> royalvidyalaya1986@gmail.com</p>
  </section>
  </center>             

  <footer>
    <p>&copy; 2025 Royal Vidyalaya. All rights reserved.</p>
  </footer>

 <!-- Chatbot UI copied here -->
    <style>

.chatbot {
  display: none; /* hide initially */
  position: fixed;
  bottom: 80px;
  right: 20px;
  width: 360px;
  max-height: 90vh;
  z-index: 9998;
}

.chatbotToggle {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background-color: #4b6cb7;
  color: white;
  padding: 12px 20px;
  border-radius: 30px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  font-weight: bold;
  font-size: 16px;
  cursor: pointer;
  z-index: 9999;
  transition: background-color 0.3s ease;
}
.chatbotToggle:hover {
  background-color: #182848;
}


.chat-container {
  display:none;
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 300px;
  height: 400px;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  z-index: 9999;
}


        .chat-container {
            width: 90%;
            max-width: 350px;
            height: 70vh;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .api-status {
            position: absolute;
            top: 10px;
            left: 15px;
            background: rgba(255,255,255,0.2);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #28a745;
        }

        .status-dot.inactive {
            background: #dc3545;
        }

        .settings-btn {
            position: absolute;
            top: 15px;
            right: 60px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
        }

        .settings-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .clear-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
        }

        .clear-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            text-align: center;
        }

        .modal-content h2 {
            color: #667eea;
            margin-bottom: 20px;
        }
        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn:hover {
            opacity: 0.9;
        }

        .usage-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 10px;
            color: #666;
        }

        .quick-buttons {
            padding: 10px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .quick-buttons p {
            font-size: 10px;
            margin-bottom: 10px;
            color: #666;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 8px;
        }

        .quick-btn {
            padding: 8px 12px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            align-items: flex-start;
        }

        .message.user {
            justify-content: flex-end;
        }

        .message-bubble {
            max-width: 80%;
            padding: 8px 12px;
            border-radius: 18px;
            font-size: 11px;
            line-height: 1.2;
        }

        .message.bot .message-bubble {
            background: white;
            color: #333;
            border: 1px solid #e9ecef;
            margin-right: 10px;
        }

        .message.user .message-bubble {
            background: #667eea;
            color: white;
            margin-left: 10px;
        }

        .avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .bot-avatar {
            background: #667eea;
            color: white;
        }

        .user-avatar {
            background: #28a745;
            color: white;
        }

        .timestamp {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 4px;
        }

        .typing {
            display: none;
            padding: 10px 16px;
            background: white;
            border-radius: 18px;
            margin-left: 45px;
            border: 1px solid #e9ecef;
        }

        .typing-dots {
            display: flex;
            gap: 3px;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: #999;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .input-area {
            padding: 20px;
            background: white;
            border-top: 1px solid #e9ecef;
        }

        .input-container {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }

        .input-field {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
            font-size: 12px;
            resize: none;
            max-height: 90px;
        }

        .input-field:focus {
            border-color: #667eea;
        }

        .send-btn {
            width: 45px;
            height: 45px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s;
        }

        .send-btn:hover {
            background: #5a67d8;
        }

        .send-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .footer-info {
            font-size: 11px;
            color: #666;
            margin-top: 8px;
            text-align: center;
        }
    </style>
</head>
<body>

  <div id="chatbotToggle" onclick="toggleChatbot()">
    ü§ñ Chat
  </div>

    <div class="chat-container">
        <div class="header">
            <div class="api-status" id="apiStatus">
                <div class="status-dot" id="statusDot"></div>
            </div>
            <button class="clear-btn" onclick="clearChat()">Clear Chat</button>
            <h1>üëë Royal School</h1>
            <p>School Information Assistant</p>
        </div>

        <div class="quick-buttons" id="quickButtons">
            <p>Quick questions:</p>
            <div class="button-grid">
                <button class="quick-btn" onclick="askQuestion('Admissions Process')">üìù Admissions Process</button>
                <button class="quick-btn" onclick="askQuestion('Academic Programs')">üìö Academic Programs</button>
                <button class="quick-btn" onclick="askQuestion('School Calendar')">üìÖ School Calendar</button>
                <button class="quick-btn" onclick="askQuestion('Contact Information')">üìû Contact Information</button>
                <button class="quick-btn" onclick="askQuestion('School Hours')">üïí School Hours</button>
                <button class="quick-btn" onclick="askQuestion('Location')">üìç Location & Directions</button>
            </div>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="message bot">
                <div class="avatar bot-avatar">ü§ñ</div>
                <div>
                    <div class="message-bubble">
                        Welcome to Royal School! üëë I'm here to help you with information about our school, admissions, academics, events, and more. How can I assist you today?
                    </div>
                    <div class="timestamp" id="welcomeTime"></div>
                </div>
            </div>
        </div>

        <div class="typing" id="typingIndicator">
            <div class="typing-dots">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
        </div>

        <div class="input-area">
            <div class="input-container">
                <textarea 
                    class="input-field" 
                    id="messageInput" 
                    placeholder="Ask about admissions, academics, events, or anything else about our school..."
                    rows="1"
                    onkeydown="handleKeyPress(event)"
                ></textarea>
                <button class="send-btn" id="sendButton" onclick="sendMessage()">‚û§</button>
            </div>
            <div class="footer-info">
                üìû For immediate assistance: 085319 63686 | üìß info@royalschool.edu
            </div>
        </div>
    </div>
    <script>
      
      function toggleChatbot() {
  const chatbot = document.getElementById('chat-container');
  if (chatbot.style.display === 'none' || chatbot.style.display === '') {
    chatbot.style.display = 'block';
  } else {
    chatbot.style.display = 'none';
  }
}

        // Initialize welcome time
        document.getElementById('welcomeTime').textContent = new Date().toLocaleTimeString();

        // API Key Management
        let currentApiKey = 'rs_ak_7f8d9e2a1b3c4e5f6789abcdef012345';
        let apiStats = {
            totalQueries: 127,
            todayQueries: 23,
            activeKeys: 1
        };

        // School knowledge base
        const schoolInfo = {
            'admission': "üìù ADMISSIONS PROCESS:\n\n‚Ä¢ Application deadline: March 15th\n‚Ä¢ Required documents: Birth certificate, previous school records, immunization records\n‚Ä¢ Entrance exam for grades 6-12\n‚Ä¢ Interview with parents and student\n‚Ä¢ Application fee: ‚Çπ500\n\nWould you like to schedule a school tour?",
            
            'academic programs': "üìö ACADEMIC PROGRAMS:\n\nElementary (K-5): Core subjects, Art, Music, PE, Computer Science\nMiddle School (6-8): Advanced Math, Science Labs, Foreign Languages (Spanish/French)\nHigh School (9-12): AP courses, Dual enrollment, STEM program, Arts program\n\nWe maintain a 15:1 student-teacher ratio across all grades.",
            
            'school calendar': "üìÖ IMPORTANT DATES 2024-2025:\n\n‚Ä¢ First Day: August 28, 2024\n‚Ä¢ Fall Break: October 14-18\n‚Ä¢ Winter Break: December 23 - January 8\n‚Ä¢ Spring Break: March 24-28\n‚Ä¢ Last Day: June 6, 2025\n‚Ä¢ Graduation: June 8, 2025",
            
            'contact information': "üìû CONTACT INFORMATION:\n\n‚Ä¢ Main Office: 085319 63686\n‚Ä¢ Admissions: 085319 63687\n‚Ä¢ Email: info@royalschool.edu\n‚Ä¢ Website: www.royalschool.edu\n‚Ä¢ Emergency Line: 085319 63688",
            
            'school hours': "üïí SCHOOL HOURS:\n\n‚Ä¢ Elementary: 9:15 AM - 3:00 PM\n‚Ä¢ Middle/High School: 8:45 AM - 4:15 PM\n‚Ä¢ Office Hours: 7:30 AM - 4:00 PM\n‚Ä¢ After-school programs until 6:00 PM",
            
            'location': "üìç LOCATION:\nRoyal School\n5/86 G, 5th Street, Kothanagar\nKrishnapuram, Tamil Nadu 627011\n\nWe're conveniently located in Kothanagar, Krishnapuram with easy access to public transportation.",
            
            'fees': "üí∞ SCHOOL FEES (Annual):\n\n‚Ä¢ Elementary (K-5): ‚Çπ80,500\n‚Ä¢ Middle School (6-8): ‚Çπ100,200\n‚Ä¢ High School (9-12): ‚Çπ180,800\n\nAdditional costs: Books (‚Çπ3000), Uniforms (‚Çπ2000), Activities (‚Çπ1500)\nFinancial aid available for qualified families.",
            
            'facilities': "üè´ OUR FACILITIES:\n\n‚Ä¢ Modern classrooms with smart boards\n‚Ä¢ Science and computer labs\n‚Ä¢ Library and media center\n‚Ä¢ Gymnasium and sports fields\n‚Ä¢ Art and music studios\n‚Ä¢ Cafeteria with healthy meal options\n‚Ä¢ School bus transportation available",
            
            'events': "üéâ UPCOMING EVENTS:\n\n‚Ä¢ Science Fair: March 15\n‚Ä¢ Spring Concert: April 12\n‚Ä¢ Open House: April 20\n‚Ä¢ Sports Day: May 10\n‚Ä¢ Art Exhibition: May 25\n\nCheck our website for the complete events calendar!"
        };

        function getCurrentTime() {
            return new Date().toLocaleTimeString();
        }

        function generateRandomApiKey() {
            const chars = 'abcdefghijklmnopqrstuvwxyz0123456789';
            let result = 'rs_ak_';
            for (let i = 0; i < 32; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        function openApiModal() {
            document.getElementById('apiModal').style.display = 'flex';
            updateApiStats();
        }

        function closeApiModal() {
            document.getElementById('apiModal').style.display = 'none';
        }

        function updateApiStats() {
            document.getElementById('totalQueries').textContent = apiStats.totalQueries;
            document.getElementById('todayQueries').textContent = apiStats.todayQueries;
            document.getElementById('activeKeys').textContent = apiStats.activeKeys;
            document.getElementById('currentApiKey').textContent = currentApiKey;
        }

        function generateApiKey() {
            const description = document.getElementById('keyDescription').value || 'Generated key';
            currentApiKey = generateRandomApiKey();
            apiStats.activeKeys = 1;
            
            updateApiStats();
            
            // Show success message
            const bubble = document.createElement('div');
            bubble.innerHTML = `‚úÖ New API key generated successfully!<br><strong>${currentApiKey}</strong>`;
            bubble.style.cssText = 'position:fixed;top:20px;right:20px;background:#28a745;color:white;padding:15px;border-radius:8px;z-index:9999;';
            document.body.appendChild(bubble);
            
            setTimeout(() => {
                document.body.removeChild(bubble);
            }, 3000);
            
            document.getElementById('keyDescription').value = '';
        }

        function revokeApiKey() {
            if (confirm('Are you sure you want to revoke the current API key? This action cannot be undone.')) {
                currentApiKey = 'No active key';
                apiStats.activeKeys = 0;
                updateApiStats();
                updateApiStatus(false);
                
                // Show warning message
                const bubble = document.createElement('div');
                bubble.innerHTML = '‚ö†Ô∏è API key revoked. Generate a new key to continue using the API.';
                bubble.style.cssText = 'position:fixed;top:20px;right:20px;background:#dc3545;color:white;padding:15px;border-radius:8px;z-index:9999;';
                document.body.appendChild(bubble);
                
                setTimeout(() => {
                    document.body.removeChild(bubble);
                }, 3000);
            }
        }

        function updateApiStatus(isActive = true) {
            const statusDot = document.getElementById('statusDot');
            const statusText = document.getElementById('statusText');
            
            if (isActive && apiStats.activeKeys > 0) {
                statusDot.classList.remove('inactive');
                statusText.textContent = 'API Active';
            } else {
                statusDot.classList.add('inactive');
                statusText.textContent = 'API Inactive';
            }
        }

        function logApiUsage() {
            apiStats.totalQueries++;
            apiStats.todayQueries++;
            
            // Simulate API rate limiting
            if (apiStats.todayQueries > 100) {
                return false; // Rate limit exceeded
            }
            
            return true; // Request allowed
        }

        function addMessage(text, isUser = false) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
            
            messageDiv.innerHTML = `
                <div class="avatar ${isUser ? 'user-avatar' : 'bot-avatar'}">
                    ${isUser ? 'üë§' : 'ü§ñ'}
                </div>
                <div>
                    <div class="message-bubble">${text.replace(/\n/g, '<br>')}</div>
                    <div class="timestamp">${getCurrentTime()}</div>
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTyping() {
            document.getElementById('typingIndicator').style.display = 'block';
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTyping() {
            document.getElementById('typingIndicator').style.display = 'none';
        }

        function getBotResponse(question) {
            // Check API rate limiting
            if (!logApiUsage()) {
                return "‚ö†Ô∏è API rate limit exceeded. Please try again later or contact our office directly at 085319 63686.";
            }
            
            const lowerQuestion = question.toLowerCase();
            
            // Check for matches in knowledge base
            for (const [key, response] of Object.entries(schoolInfo)) {
                if (lowerQuestion.includes(key)) {
                    return response;
                }
            }
            
            // Default responses
            const defaults = [
                "That's a great question! For specific information, please contact our main office at 085319 63686 or email info@royalschool.edu.",
                "I'd be happy to help you find that information! You can visit our main office during school hours (7:30 AM - 4:00 PM).",
                "For detailed information about that topic, please contact our admissions office at 085319 63687.",
                "That's an excellent question! Our staff can provide specific details. Please call 085319 63686."
            ];
            
            return defaults[Math.floor(Math.random() * defaults.length)];
        }

        function askQuestion(question) {
            document.getElementById('quickButtons').style.display = 'none';
            addMessage(question, true);
            
            showTyping();
            setTimeout(() => {
                hideTyping();
                const response = getBotResponse(question);
                addMessage(response);
            }, 1000 + Math.random() * 1500);
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const question = input.value.trim();
            
            if (!question) return;
            
            // Check if API is active
            if (apiStats.activeKeys === 0) {
                addMessage("‚ö†Ô∏è API service is currently inactive. Please contact the administrator.", false);
                return;
            }
            
            document.getElementById('quickButtons').style.display = 'none';
            addMessage(question, true);
            input.value = '';
            
            showTyping();
            setTimeout(() => {
                hideTyping();
                const response = getBotResponse(question);
                addMessage(response);
            }, 1000 + Math.random() * 1500);
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function clearChat() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = `
                <div class="message bot">
                    <div class="avatar bot-avatar">ü§ñ</div>
                    <div>
                        <div class="message-bubble">
                            Welcome to Royal School! üëë I'm here to help you with information about our school, admissions, academics, events, and more. How can I assist you today?
                        </div>
                        <div class="timestamp">${getCurrentTime()}</div>
                    </div>
                </div>
            `;
            document.getElementById('quickButtons').style.display = 'block';
        }

        // Initialize API status
        updateApiStatus();
        
        // Close modal when clicking outside
        document.getElementById('apiModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeApiModal();
            }
        });
    </script>
</body>
</html>
</div>

<script src="api/chat.js"></script> <!-- Chatbot UI copied here -->


<!-- ‚úÖ Chatbot Widget End -->
</body>
</html>
